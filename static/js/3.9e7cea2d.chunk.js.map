{"version":3,"sources":["pages/balance/index.jsx"],"names":["BrokeRage","state","applyNum","alertStatus","alertTip","balance","initData","_callee","result","E_react_react_redux_demo_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","API","getBanlance","sent","_this","setState","t0","console","error","stop","handleInput","event","value","target","test","replace","parseFloat","submitForm","closeAlert","nextProps","nextState","is","fromJS","this","props","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","className","_components_header_header__WEBPACK_IMPORTED_MODULE_9__","title","record","type","placeholder","onChange","maxLength","_components_TouchableOpacity__WEBPACK_IMPORTED_MODULE_10__","clickCallBack","text","_components_alert__WEBPACK_IMPORTED_MODULE_11__","Component"],"mappings":"mRAQqBA,qNACnBC,MAAQ,CACNC,SAAU,GACVC,aAAa,EACbC,SAAU,GACVC,QAAS,CAEPA,QAAS,MAIbC,8BAAW,SAAAC,IAAA,IAAAC,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEYC,IAAIC,cAFhB,OAEHR,EAFGI,EAAAK,KAGPC,EAAKC,SAAS,CAAEd,QAASG,IAHlBI,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAQ,GAAAR,EAAA,SAKPS,QAAQC,MAARV,EAAAQ,IALO,yBAAAR,EAAAW,SAAAhB,EAAA,mBAcXiB,YAAc,SAAAC,GACZ,IAAIC,EAAQD,EAAME,OAAOD,MACrB,sBAAsBE,KAAKF,KACzB,YAAYE,KAAKF,KACnBA,EAAQA,EAAMG,QAAQ,MAAO,KAE3B,UAAUD,KAAKF,KACjBA,EAAQA,EAAMG,QAAQ,MAAO,MAE/BH,EAAQA,EAAMG,QAAQ,QAAS,MAC3BC,WAAWJ,GAAS,MAEtBA,EAAQ,UAEVR,EAAKC,SAAS,CAAEjB,SAAUwB,QAK9BK,WAAa,WACX,IAAI3B,EAIFA,EAHGc,EAAKjB,MAAMC,SAEL4B,WAAWZ,EAAKjB,MAAMC,UAAYgB,EAAKjB,MAAMI,QAAQA,QACnD,+DAEA,uCAJA,6CAOba,EAAKC,SAAS,CACZhB,aAAa,EACbD,SAAU,GACVE,gBAIJ4B,WAAa,WACXd,EAAKC,SAAS,CACZhB,aAAa,EACbC,SAAU,2FAIQ6B,EAAWC,GAC/B,OACGC,YAAGC,YAAOC,KAAKC,OAAQF,YAAOH,MAC9BE,YAAGC,YAAOC,KAAKpC,OAAQmC,YAAOF,gDAKjCG,KAAK/B,4CAIL,OACEiC,EAAA7B,EAAA8B,cAAA,QAAMC,UAAU,kBACdF,EAAA7B,EAAA8B,cAACE,EAAA,EAAD,CAAcC,MAAM,eAAKC,QAAM,IAC/BL,EAAA7B,EAAA8B,cAAA,WAASC,UAAU,sBACjBF,EAAA7B,EAAA8B,cAAA,KAAGC,UAAU,gBAAb,8DACcJ,KAAKpC,MAAMI,QAAQA,SAEjCkC,EAAA7B,EAAA8B,cAAA,QAAMC,UAAU,cACdF,EAAA7B,EAAA8B,cAAA,+DACAD,EAAA7B,EAAA8B,cAAA,oBAEED,EAAA7B,EAAA8B,cAAA,SACEK,KAAK,OACLnB,MAAOW,KAAKpC,MAAMC,SAClB4C,YAAY,OACZC,SAAUV,KAAKb,YACfwB,UAAU,QAIhBT,EAAA7B,EAAA8B,cAACS,EAAA,EAAD,CACER,UAAU,aACVS,cAAeb,KAAKN,WACpBoB,KAAK,8BAGTZ,EAAA7B,EAAA8B,cAACY,EAAA,EAAD,CACEpB,WAAYK,KAAKL,WACjB5B,SAAUiC,KAAKpC,MAAMG,SACrBD,YAAakC,KAAKpC,MAAME,sBA7GKkD","file":"static/js/3.9e7cea2d.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { is, fromJS } from 'immutable'\r\nimport PublicHeader from '../../components/header/header'\r\nimport TouchableOpacity from '../../components/TouchableOpacity'\r\nimport PublicAlert from '../../components/alert'\r\nimport API from '../../api'\r\nimport './index.less'\r\n\r\nexport default class BrokeRage extends Component {\r\n  state = {\r\n    applyNum: '', // 输入值\r\n    alertStatus: false, // 弹框状态\r\n    alertTip: '', // 弹框提示文字\r\n    balance: {\r\n      // 可提现金额\r\n      balance: 0\r\n    }\r\n  }\r\n\r\n  initData = async () => {\r\n    try {\r\n      let result = await API.getBanlance()\r\n      this.setState({ balance: result })\r\n    } catch (err) {\r\n      console.error(err)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *金额格式化\r\n   *最大为200\r\n   * @memberof BrokeRage\r\n   */\r\n  handleInput = event => {\r\n    let value = event.target.value\r\n    if (/^\\d*?\\.?\\d{0,2}?$/gi.test(value)) {\r\n      if (/^0+[1-9]+/.test(value)) {\r\n        value = value.replace(/^0+/, '') // 把前面的0去掉\r\n      }\r\n      if (/^0{2}\\./.test(value)) {\r\n        value = value.replace(/^0+/, '0')\r\n      }\r\n      value = value.replace(/^\\./gi, '0.') // 以小数点开头 前补0\r\n      if (parseFloat(value) > 200) {\r\n        // 最大为200\r\n        value = '200.00'\r\n      }\r\n      this.setState({ applyNum: value })\r\n    }\r\n  }\r\n\r\n  // 表单提交\r\n  submitForm = () => {\r\n    let alertTip\r\n    if (!this.state.applyNum) {\r\n      alertTip = '请输入提现金额'\r\n    } else if (parseFloat(this.state.applyNum) > this.state.balance.balance) {\r\n      alertTip = '申请金额不能大于余额'\r\n    } else {\r\n      alertTip = '申请提现成功'\r\n    }\r\n\r\n    this.setState({\r\n      alertStatus: true,\r\n      applyNum: '',\r\n      alertTip\r\n    })\r\n  }\r\n\r\n  closeAlert = () => {\r\n    this.setState({\r\n      alertStatus: false,\r\n      alertTip: ''\r\n    })\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return (\r\n      !is(fromJS(this.props), fromJS(nextProps)) ||\r\n      !is(fromJS(this.state), fromJS(nextState))\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initData()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <main className=\"home-container\">\r\n        <PublicHeader title=\"提现\" record />\r\n        <section className=\"broke-main-content\">\r\n          <p className=\"broke-header\">\r\n            您的可提现金额为：¥ {this.state.balance.balance}\r\n          </p>\r\n          <form className=\"broke-form\">\r\n            <p>请输入提现金额(元)</p>\r\n            <p>\r\n              ¥&nbsp;\r\n              <input\r\n                type=\"text\"\r\n                value={this.state.applyNum}\r\n                placeholder=\"0.00\"\r\n                onChange={this.handleInput}\r\n                maxLength=\"5\"\r\n              />\r\n            </p>\r\n          </form>\r\n          <TouchableOpacity\r\n            className=\"submit-btn\"\r\n            clickCallBack={this.submitForm}\r\n            text=\"申请提现\"\r\n          />\r\n        </section>\r\n        <PublicAlert\r\n          closeAlert={this.closeAlert}\r\n          alertTip={this.state.alertTip}\r\n          alertStatus={this.state.alertStatus}\r\n        />\r\n      </main>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}