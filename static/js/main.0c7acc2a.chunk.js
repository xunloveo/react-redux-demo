(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"formData",function(){return G});var r={};n.r(r),n.d(r,"proData",function(){return q});var c=n(0),o=n.n(c),i=n(22),s=n.n(i),u=n(4),l=n(5),p=n(8),h=n(7),d=n(9),m=n(16),f=n(19),b=n(2),v=n.n(b),g=n(14);function O(t){return function(e){function n(t){var e;return Object(u.a)(this,n),(e=Object(p.a)(this,Object(h.a)(n).call(this,t))).state={component:null},e}return Object(d.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark(function e(){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,a=n.default,this.setState({component:a});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.component;return t?o.a.createElement(t,this.props):null}}]),n}(c.Component)}var j,E,y=n(36),k=n(25),w=n(40),N=n(26),S=n(1),x=n(41),C=n(27),A=(n(97),E={padStr:function(t,e,n,a){return console.log(t),e.forEach(function(e,a){t.length>e+a&&(t=t.substring(0,e+a)+n+t.substring(e+a))}),t=t.trim(),requestAnimationFrame(function(){a.setSelectionRange(t.length,t.length)}),t}},function(t){Object.assign(t.prototype,E)}(j=function(t){function e(){var t,n;Object(u.a)(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={alertStatus:!1,alertTip:""},n.selectedProList=[],n.handleInput=function(t,e){var a=e.target.value;switch(t){case"orderSum":a=a.replace(/\D/g,"");break;case"name":break;case"phoneNo":a=n.padStr(a.replace(/\D/g,""),[3,7]," ",e.target)}n.props.saveFormData(a,t)},n.uploadImg=function(){var t=Object(g.a)(v.a.mark(function t(e){var a,r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(a=new FormData).append("file",e.target.files[0]),t.next=5,C.a.uploadImg({data:a});case 5:r=t.sent,n.props.saveImg("//elm.cangdu.org/img/".concat(r.image_path)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),n.submitForm=function(){var t=n.props.formData,e=t.orderSum,a=t.name,r=t.phoneNo,c="";e.toString().length?a.toString().length?r.toString().length?(c="\u6dfb\u52a0\u6570\u636e\u6210\u529f",n.props.clearSelected(),n.props.clearData()):c="\u8bf7\u586b\u5199\u624b\u673a\u53f7":c="\u8bf7\u586b\u5199\u59d3\u540d":c="\u8bf7\u586b\u5199\u91d1\u989d",n.setState({alertStatus:!0,alertTip:c})},n.closeAlert=function(){n.setState({alertStatus:!1,alertTip:""})},n.initData=function(t){n.selectedProList=[],t.proData.dataList.forEach(function(t){t.selectStatus&&t.selectNum&&n.selectedProList.push(t)})},n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentWillReceiveProps",value:function(t){Object(S.c)(Object(S.b)(this.props.proData),Object(S.b)(t.proData))||this.initData(t)}},{key:"componentWillMount",value:function(){this.initData(this.props)}},{key:"shouldComponentUpdate",value:function(t,e){return!Object(S.c)(Object(S.b)(this.props),Object(S.b)(t))||!Object(S.c)(Object(S.b)(this.state),Object(S.b)(e))}},{key:"render",value:function(){return o.a.createElement("main",{className:"home-container"},o.a.createElement(y.a,{title:"\u9996\u9875",record:!0}),o.a.createElement("p",{className:"common-title"},"\u8bf7\u5f55\u5165\u60a8\u7684\u4fe1\u606f"),o.a.createElement("form",{className:"home-form"},o.a.createElement("div",{className:"home-form-item"},o.a.createElement("span",null,"\u9500\u552e\u91d1\u989d\uff1a"),o.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u8ba2\u5355\u91d1\u989d",value:this.props.formData.orderSum,onChange:this.handleInput.bind(this,"orderSum")})),o.a.createElement("div",{className:"home-form-item"},o.a.createElement("span",null,"\u5ba2\u6237\u59d3\u540d\uff1a"),o.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u59d3\u540d",value:this.props.formData.name,onChange:this.handleInput.bind(this,"name")})),o.a.createElement("div",{className:"home-form-item"},o.a.createElement("span",null,"\u5ba2\u6237\u7535\u8bdd\uff1a"),o.a.createElement("input",{type:"text",maxLength:"13",placeholder:"\u8bf7\u8f93\u5165\u5ba2\u6237\u7535\u8bdd",value:this.props.formData.phoneNo,onChange:this.handleInput.bind(this,"phoneNo")}))),o.a.createElement("div",null,o.a.createElement("p",{className:"common-title"},"\u8bf7\u9009\u62e9\u9500\u552e\u7684\u4ea7\u54c1"),o.a.createElement(m.b,{to:"/production",className:"common-select-btn"},this.selectedProList.length?o.a.createElement("ul",{className:"selected-pro-list"},this.selectedProList.map(function(t,e){return o.a.createElement("li",{key:e,className:"selected-pro-item ellipsis"},t.product_name,"x",t.selectNum)})):"\u9009\u62e9\u5546\u54c1")),o.a.createElement("div",{className:"upload-img-con"},o.a.createElement("p",{className:"common-title"},"\u8bf7\u4e0a\u4f20\u53d1\u7968\u51ed\u8bc1"),o.a.createElement("div",{className:"file-lable"},o.a.createElement("span",{className:"common-select-btn"},"\u4e0a\u4f20\u56fe\u7247"),o.a.createElement("input",{type:"file",onChange:this.uploadImg})),o.a.createElement("img",{src:this.props.formData.imgPath,className:"select-img",alt:""})),o.a.createElement(k.a,{className:"submit-btn",clickCallBack:this.submitForm,text:"\u63d0\u4ea4"}),o.a.createElement(w.a,{closeAlert:this.closeAlert,alertTip:this.state.alertTip,alertStatus:this.state.alertStatus}))}}]),e}(c.Component))||j),D=Object(N.b)(function(t){return{formData:t.formData,proData:t.proData}},{saveFormData:function(t,e){return{type:"SAVEFORMDATA",value:t,datatype:e}},saveImg:function(t){return{type:"SAVEIMG",path:t}},clearData:function(){return{type:"CLEARDATA"}},clearSelected:x.a})(A),L=O(function(){return n.e(5).then(n.bind(null,105))}),T=O(function(){return n.e(3).then(n.bind(null,106))}),P=O(function(){return n.e(4).then(n.bind(null,107))}),I=function(t){function e(){return Object(u.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement(m.a,null,o.a.createElement(f.d,null,o.a.createElement(f.b,{path:"/",exact:!0,component:D}),o.a.createElement(f.b,{path:"/production",component:L}),o.a.createElement(f.b,{path:"/balance",component:T}),o.a.createElement(f.b,{path:"/helpcenter",component:P}),o.a.createElement(f.a,{to:"/"})))}}]),e}(c.Component),R=n(53),F=n.n(R),U=n(55),W=n(11),M=n(21),J=n(29),B={orderSum:"",name:"",phoneNo:"",imgPath:""},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"SAVEFORMDATA":return Object(W.a)({},t,Object(J.a)({},e.datatype,e.value));case"SAVEIMG":return Object(W.a)({},t,{imgPath:e.path});case"CLEARDATA":return Object(W.a)({},t,B);default:return t}},_=n(17),V={dataList:[]},q=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case _.c:return Object(W.a)({},n,a);case _.d:return t=S.a.List(n.dataList),e=(e=S.a.Map(n.dataList[a.index])).set("selectStatus",!e.get("selectStatus")),t=t.set(a.index,e),Object(W.a)({},n,{dataList:t.toJS()});case _.b:return t=S.a.List(n.dataList),e=(e=S.a.Map(n.dataList[a.index])).set("selectNum",a.selectNum),t=t.set(a.index,e),Object(W.a)({},n,{dataList:t.toJS()});case _.a:t=S.a.fromJS(n.dataList);for(var r=0;r<n.dataList.length;r++)t=t.update(r,function(t){return t=(t=t.set("selectStatus",!0)).set("selectNum",0)});return Object(W.a)({},n,{dataList:t.toJS()});default:return n}},z=n(54),$=Object(M.d)(Object(M.c)(Object(W.a)({},a,r)),Object(M.a)(z.a)),H=(n(98),n(99),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function K(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}F.a.attach(document.body);var Q;Q=I,s.a.render(o.a.createElement(N.a,{store:$},o.a.createElement(U.AppContainer,null,o.a.createElement(Q,null))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");H?(function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):K(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):K(e,t)})}}()},17:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"d",function(){return r}),n.d(e,"b",function(){return c}),n.d(e,"a",function(){return o});var a="GETPRODUCTION",r="TOGGLESELECT",c="EITPRODUCTION",o="CLEARSELECTED"},25:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var a=n(4),r=n(5),c=n(8),o=n(7),i=n(9),s=n(0),u=n.n(s),l=n(1),p=function(t){function e(){var t,n;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=Object(c.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).handleTouchStart=function(){n.refs.btn.style.opacity="0.3"},n.handleTouchEnd=function(){n.refs.btn.style.opacity="1",n.props.clickCallBack()},n}return Object(i.a)(e,t),Object(r.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return!Object(l.c)(Object(l.b)(this.props),Object(l.b)(t))||!Object(l.c)(Object(l.b)(this.state),Object(l.b)(e))}},{key:"render",value:function(){return u.a.createElement("div",{className:"btn-con ".concat(this.props.className),onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,ref:"btn"},this.props.text||"\u786e\u8ba4")}}]),e}(s.Component)},27:function(t,e,n){"use strict";var a=n(2),r=n.n(a),c=n(14),o=n(4),i=n(5),s=n(8),u=n(7),l=n(9),p=n(11),h=n(52),d=n.n(h),m=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(i.a)(e,[{key:"uploadImg",value:function(){var t=Object(c.a)(r.a.mark(function t(){var e,n,a=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,this.fetch("post","//elm.cangdu.org/v1/addimg/shop",e);case 4:if(!(n=t.sent)||1!==n.status){t.next=9;break}return t.abrupt("return",n);case 9:throw{tip:"\u4e0a\u4f20\u56fe\u7247\u5931\u8d25",response:n,data:e,url:"//elm.cangdu.org/v1/addimg/shop"};case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(1),t.t0;case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"getRecord",value:function(){var t=Object(c.a)(r.a.mark(function t(){var e,n,a=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,this.fetch("get","/shopro/data/record/".concat(e.type));case 4:if(!((n=t.sent)&&n.data instanceof Object&&200===n.http_code)){t.next=9;break}return t.abrupt("return",n.data);case 9:throw{tip:"\u83b7\u53d6\u8bb0\u5f55\u6570\u636e\u5931\u8d25",response:n,data:e,url:"https://api.cangdu.org/shopro/data/record"};case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(1),t.t0;case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"getProduction",value:function(){var t=Object(c.a)(r.a.mark(function t(){var e,n,a=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,this.fetch("get","/shopro/data/products",e);case 4:if(!((n=t.sent)&&n.data instanceof Object&&200===n.http_code)){t.next=9;break}return t.abrupt("return",n.data.data||[]);case 9:throw{tip:"\u83b7\u53d6\u5546\u54c1\u6570\u636e\u5931\u8d25",response:n,data:e,url:"https://api.cangdu.org/shopro/data/products"};case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(1),t.t0;case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"getBanlance",value:function(){var t=Object(c.a)(r.a.mark(function t(){var e,n,a=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,this.fetch("get","/shopro/data/balance",e);case 4:if(!((n=t.sent)&&n.data instanceof Object&&200===n.http_code)){t.next=9;break}return t.abrupt("return",n.data.data||{});case 9:throw{tip:"\u83b7\u53d6\u4f63\u91d1\u6570\u636e\u5931\u8d25",response:n,data:e,url:"https://api.cangdu.org/shopro/data/balance"};case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(1),t.t0;case 16:case"end":return t.stop()}},t,this,[[1,13]])}));return function(){return t.apply(this,arguments)}}()}]),e}(function(){function t(){Object(o.a)(this,t)}return Object(i.a)(t,[{key:"fetch",value:function(t,e,n){return new Promise(function(a,r){"object"!==typeof n&&(n={});var c;c=Object(p.a)({method:t,url:e,baseURL:"//api.cangdu.org",timeout:3e4,params:null,data:null,headers:null,withCredentials:!0,validateStatus:function(t){return t>=200&&t<300}},n),d.a.request(c).then(function(t){a("object"===typeof t.data?t.data:JSON.parse(t.data))},function(t){t.response?r(t.response.data):r(t)})})}}]),t}());e.a=new m},36:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var a=n(4),r=n(5),c=n(8),o=n(7),i=n(9),s=n(0),u=n.n(s),l=n(1),p=n(16),h=n(28),d=n.n(h),m=(n(75),function(t){function e(){var t,n;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=Object(c.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).state={navState:!1},n.toggleNav=function(){n.setState({navState:!n.state.navState})},n.FirstChild=function(t){return u.a.Children.toArray(t.children)[0]||null},n}return Object(i.a)(e,t),Object(r.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return!Object(l.c)(Object(l.b)(this.props),Object(l.b)(t))||!Object(l.c)(Object(l.b)(this.state),Object(l.b)(e))}},{key:"render",value:function(){return u.a.createElement("header",{className:"header-container"},u.a.createElement("span",{className:"header-slide-icon icon-catalog",onClick:this.toggleNav}),u.a.createElement("span",{className:"header-title"},this.props.title),this.props.record&&u.a.createElement(p.c,{to:"/record",exact:!0,className:"header-link icon-jilu"}),this.props.confirm&&u.a.createElement(p.c,{to:"/",exact:!0,className:"header-link header-link-confim"},"\u786e\u5b9a"),u.a.createElement(d.a,{component:this.FirstChild,transitionName:"nav",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.state.navState&&u.a.createElement("aside",{key:"nav-slide",className:"nav-slide-list",onClick:this.toggleNav},u.a.createElement(p.c,{to:"/",exact:!0,className:"nav-link icon-jiantou-copy-copy"},"\u9996\u9875"),u.a.createElement(p.c,{to:"/balance",exact:!0,className:"nav-link icon-jiantou-copy-copy"},"\u63d0\u73b0"),u.a.createElement(p.c,{to:"/helpcenter",exact:!0,className:"nav-link icon-jiantou-copy-copy"},"\u5e2e\u52a9\u4e2d\u5fc3"))))}}]),e}(s.Component))},40:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var a=n(4),r=n(5),c=n(8),o=n(7),i=n(9),s=n(0),u=n.n(s),l=n(1),p=n(25),h=n(28),d=n.n(h),m=(n(78),function(t){function e(){var t,n;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(n=Object(c.a)(this,(t=Object(o.a)(e)).call.apply(t,[this].concat(i)))).FirstChild=function(t){return u.a.Children.toArray(t.children)[0]||null},n.confirm=function(){n.props.closeAlert()},n}return Object(i.a)(e,t),Object(r.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return!Object(l.c)(Object(l.b)(this.props),Object(l.b)(t))||!Object(l.c)(Object(l.b)(this.state),Object(l.b)(e))}},{key:"render",value:function(){return u.a.createElement(d.a,{component:this.FirstChild,transitionName:"alert",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.props.alertStatus&&u.a.createElement("div",{className:"alert-con"},u.a.createElement("div",{className:"alert-context"},u.a.createElement("div",{className:"alert-content-detail"},this.props.alertTip),u.a.createElement(p.a,{className:"confirm-btn",clickCallBack:this.confirm}))))}}]),e}(s.Component))},41:function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return p});var a=n(2),r=n.n(a),c=n(14),o=n(17),i=n(27),s=function(){return function(){var t=Object(c.a)(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.getProduction();case 3:(n=t.sent).map(function(t){return t.selectStatus=!0,t.selectNum=0,t}),e({type:o.c,dataList:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},u=function(t){return{type:o.d,index:t}},l=function(t,e){return{type:o.b,index:t,selectNum:e}},p=function(){return{type:o.a}}},56:function(t,e,n){t.exports=n(101)},75:function(t,e,n){},78:function(t,e,n){},97:function(t,e,n){},98:function(t,e){!function(t){var e,n=0,a=document.documentElement;e=window.devicePixelRatio,n=75,n*=a.clientWidth/750,a.style.fontSize=n+"px",a.setAttribute("data-dpr",e)}()},99:function(t,e,n){}},[[56,1,2]]]);
//# sourceMappingURL=main.0c7acc2a.chunk.js.map