{"version":3,"sources":["pages/production/index.jsx"],"names":["Production","togSelectPro","index","_this","props","handleEdit","num","currentNum","proData","dataList","selectNum","editPro","this","length","getProData","nextProps","nextState","is","fromJS","state","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","_components_header_header__WEBPACK_IMPORTED_MODULE_8__","title","confirm","map","item","key","onClick","bind","concat","selectStatus","product_name","Component","connect"],"mappings":"6MAYMA,qNASJC,aAAe,SAAAC,GACbC,EAAKC,MAAMH,aAAaC,MAQ1BG,WAAa,SAACH,EAAOI,GACnB,IAAIC,EAAaJ,EAAKC,MAAMI,QAAQC,SAASP,GAAOQ,UAAYJ,EAC5DC,EAAa,GACjBJ,EAAKC,MAAMO,QAAQT,EAAOK,uFAIrBK,KAAKR,MAAMI,QAAQC,SAASI,QAC/BD,KAAKR,MAAMU,2DAIOC,EAAWC,GAC/B,OACGC,YAAGC,YAAON,KAAKR,OAAQc,YAAOH,MAC9BE,YAAGC,YAAON,KAAKO,OAAQD,YAAOF,qCAI1B,IAAAI,EAAAR,KACP,OACES,EAAAC,EAAAC,cAAA,QAAMC,UAAU,kBACdH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAcC,MAAM,eAAKC,SAAO,IAChCN,EAAAC,EAAAC,cAAA,WAASC,UAAU,gBACjBH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,eACXZ,KAAKR,MAAMI,QAAQC,SAASmB,IAAI,SAACC,EAAM3B,GACtC,OACEmB,EAAAC,EAAAC,cAAA,MAAIC,UAAU,WAAWM,IAAK5B,GAC5BmB,EAAAC,EAAAC,cAAA,OACEC,UAAU,kBACVO,QAASX,EAAKnB,aAAa+B,KAAKZ,EAAMlB,IAEtCmB,EAAAC,EAAAC,cAAA,QACEC,UAAS,kCAAAS,OACPJ,EAAKK,aAAe,eAAiB,MAGzCb,EAAAC,EAAAC,cAAA,QAAMC,UAAU,YAAYK,EAAKM,eAEnCd,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAAA,QACEC,UAAS,aAAAS,OACPJ,EAAKnB,UAAY,EAAI,cAAgB,IAEvCqB,QAASX,EAAKf,WAAW2B,KAAKZ,EAAMlB,GAAQ,KAE9CmB,EAAAC,EAAAC,cAAA,QAAMC,UAAU,WAAWK,EAAKnB,WAChCW,EAAAC,EAAAC,cAAA,QACEC,UAAU,WACVO,QAASX,EAAKf,WAAW2B,KAAKZ,EAAMlB,EAAO,mBAnExCkC,cAgFVC,sBACb,SAAAlB,GAAK,MAAK,CAAEX,QAASW,EAAMX,UAC3B,CACEM,eACAb,iBACAU,aALW0B,CAObrC","file":"static/js/5.91e0da80.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { is, fromJS } from 'immutable'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport PublicHeader from '../../components/header/header'\r\nimport {\r\n  getProData,\r\n  togSelectPro,\r\n  editPro\r\n} from '../../store/production/action'\r\nimport './index.less'\r\n\r\nclass Production extends Component {\r\n  static propTypes = {\r\n    proData: PropTypes.object.isRequired,\r\n    getProData: PropTypes.func.isRequired,\r\n    togSelectPro: PropTypes.func.isRequired,\r\n    editPro: PropTypes.func.isRequired\r\n  }\r\n\r\n  // 选择商品\r\n  togSelectPro = index => {\r\n    this.props.togSelectPro(index)\r\n  }\r\n\r\n  /**\r\n   * 添加或删减商品，交由redux进行数据处理，作为全局变量\r\n   * @param  {int} index 编辑的商品索引\r\n   * @param  {int} num   添加||删减的商品数量\r\n   */\r\n  handleEdit = (index, num) => {\r\n    let currentNum = this.props.proData.dataList[index].selectNum + num\r\n    if (currentNum < 0) return\r\n    this.props.editPro(index, currentNum)\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.proData.dataList.length) {\r\n      this.props.getProData()\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return (\r\n      !is(fromJS(this.props), fromJS(nextProps)) ||\r\n      !is(fromJS(this.state), fromJS(nextState))\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <main className=\"common-con-top\">\r\n        <PublicHeader title=\"首页\" confirm />\r\n        <section className=\"pro-list-con\">\r\n          <ul className=\"pro-list-ul\">\r\n            {this.props.proData.dataList.map((item, index) => {\r\n              return (\r\n                <li className=\"pro-item\" key={index}>\r\n                  <div\r\n                    className=\"pro-item-select\"\r\n                    onClick={this.togSelectPro.bind(this, index)}\r\n                  >\r\n                    <span\r\n                      className={`icon-xuanze1 pro-select-status ${\r\n                        item.selectStatus ? 'pro-selected' : ''\r\n                      }`}\r\n                    />\r\n                    <span className=\"pro-name\">{item.product_name}</span>\r\n                  </div>\r\n                  <div className=\"pro-item-edit\">\r\n                    <span\r\n                      className={`icon-jian ${\r\n                        item.selectNum > 0 ? 'edit-active' : ''\r\n                      }`}\r\n                      onClick={this.handleEdit.bind(this, index, -1)}\r\n                    />\r\n                    <span className=\"pro-num\">{item.selectNum}</span>\r\n                    <span\r\n                      className=\"icon-jia\"\r\n                      onClick={this.handleEdit.bind(this, index, 1)}\r\n                    />\r\n                  </div>\r\n                </li>\r\n              )\r\n            })}\r\n          </ul>\r\n        </section>\r\n      </main>\r\n    )\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  state => ({ proData: state.proData }),\r\n  {\r\n    getProData,\r\n    togSelectPro,\r\n    editPro\r\n  }\r\n)(Production)\r\n"],"sourceRoot":""}